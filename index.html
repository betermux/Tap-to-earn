<!DOCTYPE html><html lang="mn">
<head>
  <meta charset="UTF-8" />
  <title>Tap to Earn MGL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <!-- Firebase JS SDK -->  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>  <!-- Telegram WebApp JS -->  <script src="https://telegram.org/js/telegram-web-app.js"></script>  <style>
    body {
      font-family: sans-serif;
      background: linear-gradient(135deg, #111, #1a1a1a);
      color: white;
      text-align: center;
      padding: 60px 20px;
      overflow: hidden;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    p {
      font-size: 1.2rem;
    }

    #tapImage {
      width: 160px;
      height: 160px;
      cursor: pointer;
      border-radius: 50%;
      box-shadow: 0 0 15px #00cc99, 0 0 30px #00cc99;
      animation: pop 1.5s infinite ease-in-out;
      transition: transform 0.2s ease;
      margin-top: 30px;
    }

    #tapImage:active {
      transform: scale(0.92);
      box-shadow: 0 0 10px #009977, 0 0 20px #009977;
    }

    @keyframes pop {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    #energy {
      margin-top: 10px;
      font-size: 1.1rem;
      color: #00ccff;
    }

    #leaderboard {
      margin-top: 40px;
      text-align: left;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    .leader-item {
      background: #222;
      padding: 10px;
      border-radius: 8px;
      margin: 5px 0;
    }

    .snow {
      position: absolute;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      opacity: 0.8;
      animation: fall linear infinite;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh);
        opacity: 0;
      }
    }
  </style></head>
<body>
  <!-- Snow effect -->
  <script>
    for (let i = 0; i < 120; i++) {
      const snow = document.createElement('div');
      snow.className = 'snow';
      snow.style.left = Math.random() * 100 + 'vw';
      snow.style.top = Math.random() * -100 + 'vh';
      snow.style.animationDuration = 5 + Math.random() * 5 + 's';
      snow.style.animationDelay = Math.random() * 5 + 's';
      document.body.appendChild(snow);
    }
  </script>  <h1>EARN FREE TON COIN, <span id="name">?</span>!</h1>
  <p>YOUR EARNED TON: <span id="score">0</span></p>
  <p id="energy">Energy: <span id="energyValue">10</span></p><img src="https://i.ibb.co/20r26xLd/Picsart-25-07-08-22-39-08-704.png"
id="tapImage"
onclick="handleTap()"
alt="Tap to Earn" />

  <div id="leaderboard">
    <h2>üèÜ Leaderboard</h2>
    <div id="leaderList"></div>
  </div>  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();
    const user = tg.initDataUnsafe.user;
    const userId = user?.id || "guest";
    const name = user?.first_name || "User";
    document.getElementById("name").innerText = name;

    const firebaseConfig = {
      apiKey: "AIzaSyDiNaEW3K2TD-uZGHYP23YR_l-BZnEjtnE",
      authDomain: "taptoearnmgl.firebaseapp.com",
      databaseURL: "https://taptoearnmgl-default-rtdb.firebaseio.com",
      projectId: "taptoearnmgl",
      storageBucket: "taptoearnmgl.appspot.com",
      messagingSenderId: "906125335650",
      appId: "1:906125335650:web:b7388d16b15fdacba6053b",
      measurementId: "G-433ZSKP5D6"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const userRef = db.ref("users/" + userId);
    const scoreEl = document.getElementById("score");
    const energyEl = document.getElementById("energyValue");

    let score = 0;
    let energy = 10;
    const maxEnergy = 10;

    function handleTap() {
      if (energy > 0) {
        energy--;
        energyEl.innerText = energy;
        increaseScore();
      } else {
        alert("‚ö° Energy –¥—É—É—Å—Å–∞–Ω! –¢“Ø—Ä —Ö“Ø–ª—ç—ç–≥—ç—ç—Ä—ç–π...");
      }
    }

    function refillEnergy() {
      if (energy < maxEnergy) {
        energy++;
        energyEl.innerText = energy;
      }
    }

    setInterval(refillEnergy, 6000); // 1 energy = 6 —Å–µ–∫—É–Ω–¥

    userRef.once("value").then(snapshot => {
      if (snapshot.exists()) {
        const data = snapshot.val();
        score = data.score || 0;
        scoreEl.innerText = score;
      } else {
        userRef.set({
          username: user?.username || "",
          score: 0,
          joined: new Date().toISOString()
        });
      }
    });

    function increaseScore() {
      score++;
      scoreEl.innerText = score;
      userRef.update({ score });
    }

    function loadLeaderboard() {
      const list = document.getElementById("leaderList");
      db.ref("users").orderByChild("score").limitToLast(10).once("value").then(snapshot => {
        const users = [];
        snapshot.forEach(child => {
          users.push({ name: child.val().username || "@anon", score: child.val().score || 0 });
        });
        users.reverse();
        list.innerHTML = users.map(u => `<div class='leader-item'>${u.name}: ${u.score} üíé</div>`).join('');
      });
    }

    loadLeaderboard();
  </script></body>
</html>