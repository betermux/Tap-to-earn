<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>Tap to Earn MGL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: sans-serif;
    background: linear-gradient(to bottom, #000000, #1a1a1a);
    color: white;
    text-align: center;
    padding: 30px;
    position: relative;
  }

  h1 {
    font-size: 1.8rem;
    margin-bottom: 10px;
  }

  #score, #energy {
    font-size: 1.2rem;
    margin: 10px 0;
  }

  .tap-button {
    background: none;
    border: none;
    cursor: pointer;
    outline: none;
  }

  .tap-button img {
    width: 160px;
    transition: transform 0.1s ease;
  }

  .tap-button:active img {
    transform: scale(0.95);
  }

  .tap-button:focus {
    outline: none;
    box-shadow: none;
  }

  .snow {
    position: fixed;
    width: 2px;
    height: 2px;
    background: white;
    animation: fall linear infinite;
    opacity: 0.7;
  }

  @keyframes fall {
    0% { transform: translateY(-10px); }
    100% { transform: translateY(100vh); }
  }
</style>
</head>
<body>
<h1>Сайн байна уу, <span id="name">?</span>!</h1>
<p>Таны олсон МӨНГӨ: <span id="score">0.0</span> ₮</p>
<p>Энерги: <span id="energy">10.0</span></p>

<button class="tap-button" onclick="increaseScore()">
  <img src="https://i.ibb.co/20r26xLd/Picsart-25-07-08-22-39-08-704.png" alt="Tap">
</button>

<script>
// Цасны эффект
for (let i = 0; i < 100; i++) {
  const snow = document.createElement('div');
  snow.className = 'snow';
  snow.style.left = Math.random() * 100 + 'vw';
  snow.style.animationDuration = (Math.random() * 3 + 2) + 's';
  snow.style.top = -Math.random() * 100 + 'px';
  document.body.appendChild(snow);
}

// Telegram хэрэглэгчийн нэр
const tg = window.Telegram?.WebApp;
tg?.expand();

const user = tg?.initDataUnsafe?.user;
const name = user?.first_name || 'User';
document.getElementById("name").innerText = name;

// Оноо ба энерги
const scoreEl = document.getElementById("score");
const energyEl = document.getElementById("energy");

let score = 0.0;
let energy = 10.0;
const maxEnergy = 100.0;

function increaseScore() {
  if (energy > 0) {
    score += 0.1;
    energy -= 0.1;
    scoreEl.innerText = score.toFixed(1);
    energyEl.innerText = energy.toFixed(1);
    navigator.vibrate?.(100);
    new Audio('https://www.soundjay.com/buttons/sounds/button-16.mp3').play();
  }
}

// Энерги аажмаар нэмэгдэх
setInterval(() => {
  if (energy < maxEnergy) {
    energy += 1.0;
    energyEl.innerText = energy.toFixed(1);
  }
}, 6000);
</script>
</body>
</html>