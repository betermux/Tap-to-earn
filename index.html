<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Fruit Slice Clone</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; overflow: hidden; background: #000; }
    #hud {
      position: absolute;
      top: 10px;
      left: 10px;
      color: #fff;
      font-family: sans-serif;
      font-size: 20px;
      z-index: 1;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <div id="hud">Score: 0 | Lives: 3</div>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const W = canvas.width;
    const H = canvas.height;

    let score = 0;
    let lives = 3;

    const fruits = [];
    const fruitImages = [];

    // --- Load fruit image (Base64 PNG of a watermelon slice) ---
    const fruitImg = new Image();
    fruitImg.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABWKLW/AAAAvUlEQVRoge3YwQnCQBCF4XNFDowFbdEpJkPqRzZsJ5kLk6Bd3BcW3aNcdmTfb3vABERERERERERERERERERkZcSREKKoAQMkcM8QkT4Ad8zmIfSBl9k4UlGAHa1/hVi9BLO7OAwqsYgQP07cBPuWDIOQzZdu8ZrfyHqL0AZc4Ag+AiugZLgA54z3A7eQf5H0hz8g7czDPmIdrZAv3AYbznE84jxkMIpH3zRERERERERERERERERERkZMdoA07Fxk8k9u7wAAAABJRU5ErkJggg==";
    fruitImages.push(fruitImg);

    // --- Touch or Mouse coordinates ---
    const pointer = { x: 0, y: 0, down: false };

    // Handle mouse
    canvas.addEventListener("mousemove", (e) => {
      pointer.x = e.clientX;
      pointer.y = e.clientY;
    });
    canvas.addEventListener("mousedown", () => pointer.down = true);
    canvas.addEventListener("mouseup", () => pointer.down = false);

    // Handle touch
    canvas.addEventListener("touchmove", (e) => {
      pointer.x = e.touches[0].clientX;
      pointer.y = e.touches[0].clientY;
    });
    canvas.addEventListener("touchstart", () => pointer.down = true);
    canvas.addEventListener("touchend", () => pointer.down = false);

    // Fruit class
    class Fruit {
      constructor() {
        this.x = Math.random() * W;
        this.y = H + 50;
        this.r = 40;
        this.vx = (Math.random() - 0.5) * 10;
        this.vy = -15 - Math.random() * 5;
        this.gravity = 0.4;
        this.sliced = false;
        this.image = fruitImages[Math.floor(Math.random() * fruitImages.length)];
      }

      update() {
        this.vy += this.gravity;
        this.x += this.vx;
        this.y += this.vy;
      }

      draw() {
        ctx.drawImage(this.image, this.x - this.r, this.y - this.r, this.r * 2, this.r * 2);
      }

      isHit(px, py) {
        const dx = this.x - px;
        const dy = this.y - py;
        return Math.sqrt(dx * dx + dy * dy) < this.r;
      }
    }

    // Spawn fruits every second
    setInterval(() => {
      fruits.push(new Fruit());
    }, 1000);

    function update() {
      for (let i = fruits.length - 1; i >= 0; i--) {
        const f = fruits[i];
        f.update();

        if (f.y > H + 50) {
          fruits.splice(i, 1);
          if (!f.sliced) {
            lives--;
            if (lives <= 0) {
              alert("Game Over! Final Score: " + score);
              location.reload();
            }
          }
        }

        if (pointer.down && !f.sliced && f.isHit(pointer.x, pointer.y)) {
          f.sliced = true;
          fruits.splice(i, 1);
          score += 10;
        }
      }
    }

    function draw() {
      ctx.clearRect(0, 0, W, H);
      for (let f of fruits) {
        f.draw();
      }
      document.getElementById("hud").textContent = `Score: ${score} | Lives: ${lives}`;
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>