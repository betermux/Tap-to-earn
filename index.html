<!DOCTYPE html> <html lang="mn"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Fruit Slice тоглоом</title> <script src="https://telegram.org/js/telegram-web-app.js"></script> <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <style> body { margin: 0; height: 100vh; font-family: Arial, sans-serif; background: linear-gradient(to bottom, #24FE41, #FDFC47); text-align: center; overflow: hidden; } #container { margin: 0 auto; max-width: 800px; height: 600px; position: relative; box-shadow: -4px 4px 35px 2px green; } #game-screen { height: 450px; background: url('background.jpg') no-repeat center; background-size: cover; position: relative; overflow: hidden; } #fruit-container { position: relative; height: 100%; } .fruit { position: absolute; width: 80px; height: 80px; display: none; cursor: pointer; } #start-btn, #restart-btn { width: 150px; height: 40px; font-size: 20px; background: white; color: red; border: none; border-radius: 3px; box-shadow: -2px 2px 14px 2px red; cursor: pointer; } #game-over { position: absolute; width: 300px; height: 200px; background: rgba(0, 0, 0, 0.7); color: white; top: 200px; left: 50%; transform: translateX(-50%); padding: 10px; font-size: 30px; display: none; } #score, #lives { font-size: 24px; color: white; text-shadow: 1px 1px 2px black; } </style> </head> <body> <div id="container"> <div id="instructions">Жимс хэрчээрэй!</div> <div id="score">Оноо: <span id="score-value">0</span></div> <div id="lives">Амь: <span id="lives-value">3</span></div> <div id="game-screen"> <div id="fruit-container"></div> </div> <button id="start-btn">Эхлэх</button> <div id="game-over"> <div>Тоглоом дууслаа!</div> <div>Таны оноо: <span id="final-score"></span></div> <button id="restart-btn">Дахин эхлэх</button> </div> </div> <audio id="slice-sound" src="slice.mp3"></audio> <script> $(document).ready(function() { let score = 0; let lives = 3; let isPlaying = false; let fruitInterval; const fruits = [ 'banana.png', 'apple.png', 'orange.png', 'watermelon.png' ]; // Telegram Web App тохируулга window.Telegram.WebApp.ready(); const user = window.Telegram.WebApp.initDataUnsafe.user; if (user) { $('#instructions').text(`Сайн байна уу, ${user.first_name}! Жимс хэрчээрэй!`); } $('#start-btn').on('click', function() { if (!isPlaying) { score = 0; lives = 3; isPlaying = true; $('#score-value').text(score); $('#lives-value').text(lives); $('#game-over').hide(); $('#start-btn').text('Дахин эхлүүлэх'); spawnFruits(); window.Telegram.WebApp.MainButton.setText('Оноогоо хуваалцах').show().onClick(() => { window.Telegram.WebApp.sendData(JSON.stringify({ score: score })); }); } else { resetGame(); } }); function spawnFruits() { fruitInterval = setInterval(function() { const fruitNum = Math.floor(Math.random() * fruits.length); const fruit = $('<img>', { class: 'fruit', src: fruits[fruitNum], css: { top: -80, left: Math.random() * ($('#fruit-container').width() - 80) } }); $('#fruit-container').append(fruit); fruit.show(); let fallSpeed = Math.floor(Math.random() * 5) + 2; const moveFruit = setInterval(function() { fruit.css('top', fruit.position().top + fallSpeed); if (fruit.position().top > $('#fruit-container').height()) { fruit.remove(); lives--; $('#lives-value').text(lives); if (lives <= 0) { endGame(); } clearInterval(moveFruit); } }, 20); fruit.on('click touchstart', function(e) { e.preventDefault(); score++; $('#score-value').text(score); $('#slice-sound')[0].currentTime = 0; $('#slice-sound')[0].play(); fruit.hide('explode', 500); clearInterval(moveFruit); setTimeout(() => fruit.remove(), 500); }); }, 1500); } function endGame() { isPlaying = false; clearInterval(fruitInterval); $('#game-over').show(); $('#final-score').text(score); $('#start-btn').text('Эхлэх'); $('.fruit').remove(); window.Telegram.WebApp.MainButton.hide(); } function resetGame() { isPlaying = false; clearInterval(fruitInterval); score = 0; lives = 3; $('#score-value').text(score); $('#lives-value').text(lives); $('#game-over').hide(); $('.fruit').remove(); window.Telegram.WebApp.MainButton.hide(); } $('#restart-btn').on('click', function() { resetGame(); $('#start-btn').trigger('click'); }); }); </script> </body> </html>